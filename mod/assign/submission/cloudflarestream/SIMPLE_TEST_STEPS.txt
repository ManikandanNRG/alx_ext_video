================================================================================
  SIMPLE TESTING STEPS - Private Video Implementation
================================================================================

Follow these steps in order:

================================================================================
  STEP 1: CLEAR CACHE (REQUIRED!)
================================================================================

Go to: Site administration > Development > Purge all caches
Click: "Purge all caches" button

‚è±Ô∏è Time: 1 minute

================================================================================
  STEP 2: RUN TEST SCRIPT
================================================================================

Open: https://dev.aktrea.net/mod/assign/submission/cloudflarestream/test_private_video.php

‚úÖ Look for:
   - "requireSignedURLs: TRUE (PRIVATE)" ‚úÖ
   - "Token generated successfully" ‚úÖ
   
‚ùå If you see:
   - "requireSignedURLs: FALSE (PUBLIC)" ‚ùå - Files not updated!

‚è±Ô∏è Time: 2 minutes

================================================================================
  STEP 3: UPLOAD A VIDEO
================================================================================

1. Go to any assignment
2. Click "Add submission"
3. Upload a video file
4. Wait for "Ready" status

‚è±Ô∏è Time: 3 minutes

================================================================================
  STEP 4: CHECK BROWSER CONSOLE
================================================================================

1. Press F12 (open developer tools)
2. Click "Console" tab
3. Look for these messages:

   ‚úÖ "Cloudflare player embedded with IFRAME method"
   ‚úÖ "Video UID: [32-char string]"
   ‚úÖ "Token length: [500+ number]"
   
4. Check for errors:
   ‚ùå No red error messages
   ‚ùå No 401 errors

‚è±Ô∏è Time: 1 minute

================================================================================
  STEP 5: INSPECT VIDEO ELEMENT
================================================================================

1. Right-click on video player
2. Select "Inspect" or "Inspect Element"
3. Find the <iframe> tag
4. Check the src attribute:

   ‚úÖ Should contain: "iframe.videodelivery.net"
   ‚úÖ Should contain: "?token="
   ‚úÖ Token should be 500+ characters

‚è±Ô∏è Time: 1 minute

================================================================================
  STEP 6: VERIFY IN CLOUDFLARE
================================================================================

1. Log into Cloudflare dashboard
2. Go to Stream section
3. Find your video
4. Check: "Signed URLs Required: Yes" ‚úÖ

‚è±Ô∏è Time: 2 minutes

================================================================================
  STEP 7: PLAY THE VIDEO
================================================================================

Click play button on video

‚úÖ Video should play smoothly
‚úÖ No errors
‚úÖ Controls work

‚è±Ô∏è Time: 30 seconds

================================================================================
  RESULTS CHECKLIST
================================================================================

Mark each item:

[ ] Cache cleared
[ ] Test script shows "PRIVATE"
[ ] Test script shows token generated
[ ] Video uploaded successfully
[ ] Console shows "IFRAME method"
[ ] Console shows Video UID
[ ] Console shows Token length
[ ] No 401 errors in console
[ ] Inspect shows <iframe> tag
[ ] Inspect shows ?token= parameter
[ ] Cloudflare shows "Signed URLs Required: Yes"
[ ] Video plays without errors

================================================================================
  IF ALL CHECKED: SUCCESS! üéâ
================================================================================

Your private video implementation is working correctly!

Videos are now:
‚úÖ Uploaded as PRIVATE
‚úÖ Require signed tokens
‚úÖ Using IFRAME method
‚úÖ Secure and protected

================================================================================
  IF TESTS FAIL: QUICK FIXES
================================================================================

Problem: Test script shows "PUBLIC" instead of "PRIVATE"
Fix: Re-upload cloudflare_client.php and clear cache

Problem: Console doesn't show "IFRAME method"
Fix: Re-upload player.min.js and clear cache, then hard refresh (Ctrl+F5)

Problem: 401 errors
Fix: Check signing keys in plugin settings

Problem: Video doesn't play
Fix: Wait 2-3 minutes for processing, then refresh page

================================================================================
  ROLLBACK (if needed)
================================================================================

SSH to server:
cd /path/to/moodle/mod/assign/submission/cloudflarestream
cp backups/cloudflare_client.php.backup classes/api/cloudflare_client.php
cp backups/player.js.backup amd/src/player.js
cp amd/src/player.js amd/build/player.min.js
cd /path/to/moodle
php admin/cli/purge_caches.php

================================================================================
  TOTAL TIME: ~10 MINUTES
================================================================================

For detailed instructions, see: LIVE_SERVER_TESTING.md

================================================================================
